<% layout('layouts/boilerplate') -%>
<h1>Edit Ingredient!</h1>

<% include ../../public/javascripts/functions.ejs %>

<form action="/ingredients/<%= ingredient.id %>?_method=PUT" method="POST">
    <div class="form-group">
        <label for="ingredientTitle">Title</label>
        <input type="text" name="title" class="form-control" id="ingredientTitle" value="<%= ingredient.title %>">
    </div>
    <div class="form-group">
        <label for="categories">Categories</label>
        <select class="form-control" name="categories" id="categories" multiple>
            <% categories.forEach(category => { %>
                <% if ( findWithAttr(ingredient.categories, String(category.id))  !== -1) { %>
                    <option value="<%= category.id %>" selected><%= category.title %></option>
                <% } else { %>
                    <option value="<%= category.id %>"><%= category.title %></option>
                <% } %>
            <% }); %>
        </select>
    </div>
    <div class="form-group">
        <label for="processTypes">Processing Type</label>
        <select class="form-control" name="processTypes" id="processTypes" multiple>
            <% processTypes.forEach(processType => { %>
                <% if ( findWithAttr(ingredient.processTypes, String(processType.id))  !== -1) { %>
                    <option value="<%= processType.id %>" selected><%= processType.title %></option>
                <% } else { %>
                    <option value="<%= processType.id %>"><%= processType.title %></option>
                <% } %>
            <% }); %>
        </select>
    </div>
    <button type="submit" class="btn btn-primary">Update</button>
</form>